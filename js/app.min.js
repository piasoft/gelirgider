
$('form:not(.no)').ajaxForm({
    dataType:  'json', 
    beforeSerialize: function(form, options) {
        var button_text = form.find('button[type=submit]').attr('disabled',true).html();
        form.find('button[type=submit]').prepend('<i class="far fa-spin fa-fw fa-spinner-third"></i> ');

    },
    success: function(responseText, statusText, xhr, $form) {  
        var data = responseText;
        alertify(data.status, data.description, data.url, data.time);  
        $form.find('button[type=submit]').removeAttr('disabled').find('.far').remove();
        
    }
});




function alertify(status, text, url = undefined){
    
    if(status=='success'){ var icon = '<i class="fa fa-check"></i>'; }
    if(status=='error'){ var icon =  '<i class="fa fa-times"></i>'; }
    if(status=='warning'){ var icon =  '<i class="fa fa-exclamation"></i>'; }

    $('body').append('<div class="alertify '+status+'">'+icon+text+'</div>');


    setTimeout  (function(){ 

        $('.alertify').remove();  

        if(status=='success'){ url==undefined ? location.reload() : window.location.href = url;   }

    }, 2000);   

}

function _delete(table, value){
   
    if(confirm('Silmek istediğinizden emin misiniz?')){

        $.post( '_ajax/_ajaxDelete.php', { table : table , value : value }, function( data ) {
            alertify(data.status, data.description, data.url, data.time);
        }, 'json');

    }
}




$('.header .toggle').click(function (event) {

    event.preventDefault();

    if($('.sidebar').hasClass('open')){


        $(this).html('<i class="fal fa-bars"></i> Menü');


        $('.overlay').remove();
        $('.sidebar').removeClass('open');

    }else{

        $('.sidebar').addClass('open');

        $('body').append('<div class="overlay"></div>');

        $(this).html('<i class="fal fa-times"></i> Menü');

    }

});




$('table').each(function(){ 
   
  

    var table = $(this).DataTable( {   
        'lengthChange': false,
        'pageLength' : 25,
        'responsive': true,
        'order': [[0, 'desc']],
      
    }); 

    var buttons = new $.fn.dataTable.Buttons(table, {
          buttons: [
                {
                      extend: 'excelHtml5',
                      className: 'btn-primary btn-sm',
                      title:document.title,
                      stripHtml: true,
                        text: '.xlsx',
                         exportOptions : {
                            columns: ':not(:last-child)'
                            
                             },

                       
                      footer: true
  

                },
                 {
                      extend: 'pdfHtml5',
                      className: 'btn-primary btn-sm',
                      stripHtml: true,
                      title:document.title,
                        text: '.pdf',
                         exportOptions : {
                             columns: ':not(:last-child)'
               
                          },
                             footer: true
                 }
     
  
          ],

    }).container().appendTo($('.title .right'));






});







      

$('.selectpicker').selectpicker({
    size:5,
    mobile:false,
    iconBase:'far',
    tickIcon:'fa-check',
    liveSearch:true,
    liveSearchPlaceholder: 'Ara',
    styleBase:'form-control',
    style:''
});


$( window ).on('load', function() {
     $('.loader').remove();
});


